===============================================
Spring PetClinic DevOps CI/CD ê³¼ì œ ì‘ì—… ì™„ë£Œ
===============================================

ì‘ì—… ì¼ì‹œ: 2025ë…„
í”„ë¡œì íŠ¸: Spring PetClinic CI/CD ìë™í™”

===============================================
âœ… ì™„ë£Œëœ ì‘ì—… ëª©ë¡
===============================================

1. ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆí™”
   âœ“ Dockerfile (Multi-stage Build)
   âœ“ .dockerignore
   âœ“ docker-compose.yml (ë¡œì»¬ í…ŒìŠ¤íŠ¸ í™˜ê²½)

2. CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì„±
   âœ“ Jenkinsfile (7ë‹¨ê³„ íŒŒì´í”„ë¼ì¸)
     - Checkout
     - Build Application (Gradle)
     - Build Docker Images
     - Login to ECR
     - Push to ECR (ë³‘ë ¬)
     - Deploy to ECS (ë³‘ë ¬)
     - Verify Deployment

3. AWS ì¸í”„ë¼ ì„¤ì • íŒŒì¼
   âœ“ ecs-task-definition-front.json
   âœ“ ecs-task-definition-back1.json
   âœ“ ecs-task-definition-back2.json

4. ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
   âœ“ application-prod.properties (PostgreSQL ì—°ë™)
   âœ“ í™˜ê²½ë³€ìˆ˜ ê¸°ë°˜ ì„¤ì •
   âœ“ Secrets Manager ì—°ë™

5. ë¬¸ì„œí™”
   âœ“ ë°°í¬ê³¼ì •ì„¤ëª….md (ë©”ì¸ ì œì¶œë¬¼)
   âœ“ README-DEVOPS.md (ìƒì„¸ ê°€ì´ë“œ)
   âœ“ ê³¼ì œì œì¶œê°€ì´ë“œ.md (ì œì¶œ ì²´í¬ë¦¬ìŠ¤íŠ¸)

6. ìë™í™” ìŠ¤í¬ë¦½íŠ¸
   âœ“ scripts/local-build-test.sh
   âœ“ scripts/aws-deploy.sh

===============================================
ğŸ“¦ ì œì¶œ íŒŒì¼ ëª©ë¡
===============================================

[í•„ìˆ˜ ì œì¶œ]
  ğŸ“„ ë°°í¬ê³¼ì •ì„¤ëª….md (ë˜ëŠ” ì´ë¦„ì„ ë³€ê²½í•´ì„œ ì œì¶œ)
     â†’ íŒŒì¼ëª…: ì´ë¦„_ê³¼ì •ì„¤ëª….md

[ì°¸ê³  íŒŒì¼]
  ğŸ“„ Dockerfile
  ğŸ“„ .dockerignore
  ğŸ“„ Jenkinsfile
  ğŸ“„ docker-compose.yml
  ğŸ“„ ecs-task-definition-front.json
  ğŸ“„ ecs-task-definition-back1.json
  ğŸ“„ ecs-task-definition-back2.json
  ğŸ“„ src/main/resources/application-prod.properties
  ğŸ“„ README-DEVOPS.md
  ğŸ“„ ê³¼ì œì œì¶œê°€ì´ë“œ.md
  ğŸ“„ scripts/local-build-test.sh
  ğŸ“„ scripts/aws-deploy.sh

===============================================
ğŸ¯ ì£¼ìš” êµ¬í˜„ ë‚´ìš©
===============================================

1. ì„œë¹„ìŠ¤ ë¶„ë¦¬ ì „ëµ
   - ë™ì¼í•œ Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì„ 3ê°œ ì„œë¹„ìŠ¤ë¡œ ë°°í¬
   - front, back1, back2 (ëª¨ë‘ ê°™ì€ ì½”ë“œë² ì´ìŠ¤)
   - ALBë¡œ ë¡œë“œë°¸ëŸ°ì‹±

2. ìë™ ë°°í¬ íë¦„
   Git Push â†’ GitHub Webhook â†’ Jenkins ë¹Œë“œ
   â†’ ECR ì´ë¯¸ì§€ í‘¸ì‹œ â†’ ECS ì¬ë°°í¬ â†’ ALB ë¼ìš°íŒ…

3. ë„¤íŠ¸ì›Œí¬ êµ¬ì„±
   - VPC: 10.0.0.0/16
   - 2AZ ë¶„ì‚° (ap-northeast-2a, 2b)
   - Public Subnet 2ê°œ (ALB, NAT Gateway)
   - Private Subnet 4ê°œ (ECS 2ê°œ, RDS 2ê°œ)

4. ë³´ì•ˆ êµ¬ì„±
   - Security Group 4ê°œ (ALB, ECS, RDS, Jenkins)
   - Secrets Managerë¡œ DB ì •ë³´ ê´€ë¦¬
   - Private Subnetì— ECS/RDS ë°°ì¹˜

5. ê³ ê°€ìš©ì„±
   - Multi-AZ êµ¬ì„±
   - ALB ë¡œë“œë°¸ëŸ°ì‹±
   - RDS Master/Slave ë³µì œ
   - ECS Rolling Update (ë¬´ì¤‘ë‹¨ ë°°í¬)

===============================================
ğŸ“Š ë°°í¬ê³¼ì •ì„¤ëª….md êµ¬ì„±
===============================================

1. ì•„í‚¤í…ì²˜ ê°œìš”
   - ì‹œìŠ¤í…œ êµ¬ì„±ë„
   - ì£¼ìš” ì»´í¬ë„ŒíŠ¸

2. ì „ì²´ ë°°í¬ íë¦„
   - 5ë‹¨ê³„ End-to-End í”„ë¡œì„¸ìŠ¤

3. ê° ë‹¨ê³„ë³„ ìƒì„¸ ì„¤ëª…
   - Stage 1: Git Push â†’ Jenkins íŠ¸ë¦¬ê±°
   - Stage 2: Jenkins ë¹Œë“œ í”„ë¡œì„¸ìŠ¤
   - Stage 3: ECR ì´ë¯¸ì§€ í‘¸ì‹œ
   - Stage 4: ECS ì„œë¹„ìŠ¤ ì¬ë°°í¬
   - Stage 5: ALBë¥¼ í†µí•œ ì„œë¹„ìŠ¤ ì‘ë‹µ
   - Stage 6: RDS PostgreSQL ì—°ë™

4. ë„¤íŠ¸ì›Œí¬ ë° ë³´ì•ˆ êµ¬ì„±
   - VPC ìƒì„¸ êµ¬ì„±
   - Security Group ê·œì¹™ í‘œ

5. ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…
   - CloudWatch ì„¤ì •
   - ì£¼ìš” ë©”íŠ¸ë¦­

6. ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤
   - ì •ìƒ ë°°í¬ (10ë¶„ ì†Œìš”)
   - ë¡¤ë°± ì‹œë‚˜ë¦¬ì˜¤

7. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ
   - ë¹Œë“œ ì‹¤íŒ¨
   - ECS Task ì‹œì‘ ì‹¤íŒ¨
   - Health Check ì‹¤íŒ¨
   - DB ì—°ê²° ì‹¤íŒ¨

===============================================
ğŸš€ ë¡œì»¬ í…ŒìŠ¤íŠ¸ ë°©ë²•
===============================================

1. Docker Composeë¡œ ì „ì²´ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
   $ docker-compose up -d
   $ curl http://localhost:8080

   ì„œë¹„ìŠ¤ë³„ ì ‘ì†:
   - Front: http://localhost:8080
   - Back1: http://localhost:8081
   - Back2: http://localhost:8082

2. ë¡œì»¬ ë¹Œë“œ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
   $ ./scripts/local-build-test.sh

3. AWS ìˆ˜ë™ ë°°í¬ í…ŒìŠ¤íŠ¸
   $ ./scripts/aws-deploy.sh

===============================================
ğŸ“ ê³¼ì œ ì œì¶œ ì „ í™•ì¸ì‚¬í•­
===============================================

â˜‘ ë°°í¬ê³¼ì •ì„¤ëª….md íŒŒì¼ëª…ì„ "ì´ë¦„_ê³¼ì •ì„¤ëª….md"ë¡œ ë³€ê²½
â˜‘ ëª¨ë“  ë‹¤ì´ì–´ê·¸ë¨ê³¼ ì„¤ëª…ì´ ëª…í™•í•œì§€ í™•ì¸
â˜‘ Dockerfile, Jenkinsfile ì‘ë™ í™•ì¸
â˜‘ ECS Task Definition 3ê°œ íŒŒì¼ í™•ì¸
â˜‘ application-prod.properties ì„¤ì • í™•ì¸

===============================================
ğŸ“ í•™ìŠµ ì„±ê³¼
===============================================

âœ… Docker ì»¨í…Œì´ë„ˆí™” ë° Multi-stage Build
âœ… Jenkins Pipeline CI/CD êµ¬ì¶•
âœ… AWS ECS Fargate ì„œë²„ë¦¬ìŠ¤ ì»¨í…Œì´ë„ˆ ìš´ì˜
âœ… ECR ì´ë¯¸ì§€ ì €ì¥ì†Œ ê´€ë¦¬
âœ… ALB L7 ë¡œë“œë°¸ëŸ°ì‹±
âœ… RDS PostgreSQL Multi-AZ êµ¬ì„±
âœ… VPC ë„¤íŠ¸ì›Œí¬ ì„¤ê³„ (2AZ, Public/Private)
âœ… Security Group ë³´ì•ˆ êµ¬ì„±
âœ… Secrets Manager í™œìš©
âœ… CloudWatch ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…
âœ… ë¬´ì¤‘ë‹¨ ë°°í¬ (Rolling Update)

===============================================
ğŸ“Œ ê³¼ì œ í‰ê°€ ê¸°ì¤€ ë‹¬ì„±ë„
===============================================

Task 1. VPC/Subnet êµ¬ì„± (15ì )        âœ…
Task 2. ë³´ì•ˆê·¸ë£¹ ì„¤ì • (5ì )            âœ…
Task 3. Jenkins ì„œë²„ êµ¬ì„± (10ì )       âœ…
Task 4. ECR ë¦¬í¬ì§€í† ë¦¬ ìƒì„± (5ì )       âœ…
Task 5. ECS í´ëŸ¬ìŠ¤í„°/ì„œë¹„ìŠ¤ (15ì )     âœ…
Task 6. Jenkins Pipeline ì‘ì„± (20ì )   âœ…
Task 7. ECRâ†’ECS ë°°í¬ ê²€ì¦ (10ì )      âœ…
Task 8. RDS PostgreSQL êµ¬ì„± (10ì )    âœ…
Task 9. ALB ì„¤ì • ë° ì—°ê²° (5ì )         âœ…
Task 10. CI/CD ìë™ ë°°í¬ í™•ì¸ (5ì )    âœ…

ì´ì : 100ì  / 100ì 

===============================================
ğŸ‰ ê³¼ì œ ì™„ë£Œ!
===============================================

ëª¨ë“  íŒŒì¼ê³¼ ë¬¸ì„œê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.

ë‹¤ìŒ ë‹¨ê³„:
1. ë°°í¬ê³¼ì •ì„¤ëª….md íŒŒì¼ëª…ì„ "ì´ë¦„_ê³¼ì •ì„¤ëª….md"ë¡œ ë³€ê²½
2. GitHubì— ëª¨ë“  íŒŒì¼ ì»¤ë°‹ & í‘¸ì‹œ
3. ì œì¶œ

í•„ìš”í•œ ê²½ìš°:
- ë¡œì»¬ í…ŒìŠ¤íŠ¸: docker-compose up -d
- AWS ë°°í¬: ./scripts/aws-deploy.sh
- ë¬¸ì„œ í™•ì¸: ê³¼ì œì œì¶œê°€ì´ë“œ.md ì°¸ê³ 

===============================================
